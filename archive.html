---
title: Archive
layout: default
description: ""
header-img: "img/archive.jpg"
---

{% include intro-header.html type='page' short=true %}

<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      {%- comment -%} Build a unified list: Projects + Poetry {%- endcomment -%}
      {% assign research = site.research %}{% if research == nil %}{% assign research = '' | split: '' %}{% endif %}
      {% assign festivals = site.festivals %}{% if festivals == nil %}{% assign festivals = '' | split: '' %}{% endif %}
      {% assign moderations = site.moderations %}{% if moderations == nil %}{% assign moderations = '' | split: '' %}{% endif %}
	  {% assign creative_writing = site.creative_writing %}{% if creative_writing == nil %}{% assign creative_writing = '' | split: '' %}{% endif %}
      {% assign poetry = site.poetry %}{% if poetry == nil %}{% assign poetry = '' | split: '' %}{% endif %}

      {% assign _all = research | concat: festivals | concat: moderations | concat: poetry | concat: creative_writing %}
      {% assign _all = _all | where_exp: "i", "i.date" %}
      {% assign _all = _all | sort: "date" | reverse %}

      {%- comment -%} Build a unique tag list across _all {%- endcomment -%}
      {% capture _tag_string %}{% endcapture %}
      {% for _doc in _all %}
        {% if _doc.tags %}
          {% for _t in _doc.tags %}
            {% capture _tag_string %}{{ _tag_string }}|{{ _t | strip }}{% endcapture %}
          {% endfor %}
        {% endif %}
      {% endfor %}
      {% assign _tags = _tag_string | split: "|" | uniq | sort_natural %}
      {% assign _tags = _tags | where_exp: "t", "t != ''" %}

      <!-- Tags (as filter) -->
      <div id="tag_cloud" class="tags tags-sup js-tags">
        <a class="tag-button--all" data-encode="">
          Show All
          <sup>{{ _all.size }}</sup>
        </a>

        {% capture tags_markup %}
        {% for tag in _tags %}
          {% assign tag_count = _all | where_exp: "i", "i.tags and i.tags contains tag" | size %}
          <a
            data-sort="{{ _all.size | minus: tag_count | prepend: '0000' | slice: -4, 4 }}"
            data-encode="{{ tag | url_encode }}"
            class="tag-button"
            title="{{ tag }}"
            rel="{{ tag_count }}"
          >
            {{ tag }}
            <sup>{{ tag_count }}</sup>
          </a>__SEPARATOR__
        {% endfor %}
        {% endcapture %}
        {{ tags_markup | split: '__SEPARATOR__' | sort }}
      </div>

      <!-- Article List -->
      <div class="mini-post-list js-result d-none">
        {%- assign _date = "" -%}
        {% for _article in _all %}
          {%- comment -%} build a CSV of tag encodes per item {%- endcomment -%}
          {%- assign _tags_csv = "" -%}
          {% if _article.tags %}
            {% for _tag in _article.tags %}
              {% assign _enc = _tag | strip | url_encode %}
              {% if forloop.first %}
                {%- assign _tags_csv = _enc -%}
              {% else %}
                {%- assign _tags_csv = _tags_csv | append: ',' | append: _enc -%}
              {% endif %}
            {% endfor %}
          {% endif %}

          {%- assign _current_year = _article.date | date: '%Y' -%}
          {% if _current_year != _date %}
            {% unless forloop.first %}</section>{% endunless %}
            <section>
              <span class="fa listing-seperator">
                <span class="tag-text">{{ _current_year }}</span>
              </span>
            {% assign _date = _current_year %}
          {% endif %}

          <div class="post-preview item" data-tags="{{ _tags_csv }}">
            <a href="{{ _article.url | relative_url }}">
              <h2 class="post-title">{{ _article.title }}</h2>
              {% if _article.subtitle %}
                <h3 class="post-subtitle">{{ _article.subtitle }}</h3>
              {% endif %}
            </a>
            <hr>
          </div>

          {% if forloop.last %}</section>{% endif %}
        {% endfor %}
      </div>

    </div>
  </div>
</div>
